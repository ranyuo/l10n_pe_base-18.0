<?xml version="1.0" encoding="utf-8"?>
<odoo>
    	<record id="view_move_form_retention" model="ir.ui.view">

            <field name="name">account.move.form.retention</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">

                <xpath expr="//form/header" position="before">
                    <field name="is_retention" invisible="1"/>

                    <div class="alert alert-info" role="alert" style="margin-bottom:0px; background-color: #8de0a1;" invisible = "is_retention not in [True]">
                        <bold>Documento sujeto a Retención !</bold> 
                    </div>

                </xpath>

                <!-- ###################################################### -->
    
                <xpath expr="//form/sheet/div[hasclass('oe_button_box')]" position="inside">
                  
                  <field name="is_retention" invisible="1"/>
                  <field name="account_invoice_retention_ids" invisible="1"/>

                  <button name="action_open_account_invoice_retention_ids" class="oe_stat_button" icon="fa-book" type="object" string="Registros de Retención" invisible = "state not in ['posted'] or is_retention not in [True] or  account_invoice_retention_ids in [None,False,'']"/>

                </xpath>

            </field>
        </record>

        <record id="view_account_invoice_form_desglose_venta_inherit" model="ir.ui.view">
            <field name="name">account.invoice.form.desglose.venta.inherit</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="l10n_pe_edi_doc.view_account_invoice_form_desglose_venta"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@id='subtotal_ple_sire']//field[@name='total_venta']" position="after">
                    <field name="retention_amount"/>
                </xpath>
            </field>
        </record>

</odoo>


